{
  "hash": "6a9fa195d10b42e7ad912bed0dc8242f",
  "result": {
    "markdown": "---\ntitle: \"My Post\"\ndescription: \"Post description\"\nauthor: \"Fizz McPhee\"\ndate: \"5/22/2021\"\ndate-modified: \"5/23/2021\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Option 1: tidytuesdayR package \n## install.packages(\"tidytuesdayR\")\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.3     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\ntuesdata <- tidytuesdayR::tt_load('2023-08-22')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Compiling #TidyTuesday Information for 2023-08-22 ----\n--- There is 1 file available ---\n--- Starting Download ---\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 1: `population.csv`\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Download complete ---\n```\n:::\n\n```{.r .cell-code}\ndata_raw <- tuesdata |> pluck(1)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- data_raw |> \n  mutate(year = as_date(parse_date_time(year, \"%Y\")), .before = 1)\n```\n:::\n\n\n# Focus\n\n* how many refugees (refugees), what is the diff (asylum_seekers)\n* from where (coo_name) to destination (coa_name)\n* has it changed? why it has changed?\n\n* too many countries, what to focus\n  + changes in some region? - why a change has happended?\n* short deep dive to asylum seekers?\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> count(coo_name, sort = T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 210 × 2\n   coo_name                   n\n   <chr>                  <int>\n 1 Syrian Arab Rep.        1352\n 2 Somalia                 1345\n 3 Iraq                    1281\n 4 Dem. Rep. of the Congo  1269\n 5 Sudan                   1228\n 6 Afghanistan             1154\n 7 Eritrea                 1088\n 8 Iran (Islamic Rep. of)  1079\n 9 Stateless               1075\n10 Ethiopia                1066\n# ℹ 200 more rows\n```\n:::\n\n```{.r .cell-code}\ndf |> count(coa_name, sort = T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 189 × 2\n   coa_name                                                 n\n   <chr>                                                <int>\n 1 United States of America                              2305\n 2 Canada                                                2212\n 3 Germany                                               1931\n 4 United Kingdom of Great Britain and Northern Ireland  1778\n 5 France                                                1593\n 6 Sweden                                                1546\n 7 Australia                                             1545\n 8 Switzerland                                           1397\n 9 Italy                                                 1375\n10 Belgium                                               1374\n# ℹ 179 more rows\n```\n:::\n\n```{.r .cell-code}\ndf |> count(coo_name,coa_name, sort = T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 7,710 × 3\n   coo_name    coa_name        n\n   <chr>       <chr>       <int>\n 1 Afghanistan Afghanistan    13\n 2 Afghanistan Australia      13\n 3 Afghanistan Austria        13\n 4 Afghanistan Azerbaijan     13\n 5 Afghanistan Belarus        13\n 6 Afghanistan Belgium        13\n 7 Afghanistan Brazil         13\n 8 Afghanistan Bulgaria       13\n 9 Afghanistan Canada         13\n10 Afghanistan Chile          13\n# ℹ 7,700 more rows\n```\n:::\n:::\n\n\n# check egypt\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrefugees_to_country <- df |> \n  group_by(coa_name, year = year(year)) |> \n  summarise(total_refugess = sum(refugees)) |>\n  ungroup(year) |> \n  mutate(change = log(total_refugess) - log( (lag(total_refugess, order_by = year))))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'coa_name'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nrefugees_to_country\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2,265 × 4\n# Groups:   coa_name [189]\n   coa_name     year total_refugess     change\n   <chr>       <dbl>          <dbl>      <dbl>\n 1 Afghanistan  2010           6434 NA        \n 2 Afghanistan  2011           3011 -0.759    \n 3 Afghanistan  2012          16184  1.68     \n 4 Afghanistan  2013          16861  0.0410   \n 5 Afghanistan  2014         300421  2.88     \n 6 Afghanistan  2015         257553 -0.154    \n 7 Afghanistan  2016          59770 -1.46     \n 8 Afghanistan  2017          75927  0.239    \n 9 Afghanistan  2018          72228 -0.0499   \n10 Afghanistan  2019          72227 -0.0000138\n# ℹ 2,255 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrefugees_to_country |> \n  ggplot(aes(year, total_refugess)) + \n  geom_line() +\n  scale_y_log10()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Transformation introduced infinite values in continuous y-axis\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> \n  ggplot(aes(year, refugees))+\n  geom_col()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndf |> \n  ggplot(aes(year, asylum_seekers))+\n  geom_col()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}